# Deployment Guide - Deep Research App

## âœ… Implementation Complete!

Your app now supports **email sending on Hugging Face Spaces** using Resend API!

## What Changed

1. **Added Resend Integration** (`email_agent.py`)

   - Primary method: Resend API (works everywhere)
   - Fallback method: Gmail SMTP (local only)
   - Automatic detection and failover

2. **Updated Dependencies** (`requirements.txt`)

   - Added `resend==2.6.0`

3. **Updated Documentation** (`README.md`)
   - Clear setup instructions for both Resend and Gmail
   - Free tier information (100 emails/day with Resend)

## Your Credentials

**Resend API Key:** `re_TQ4qchKh_KuURV69cpX3UT8vnx5uNY2hJ`

- Already configured in your Resend account
- Works on Hugging Face Spaces âœ…
- Free tier: 100 emails/day

**Gmail SMTP** (for local use):

- Email: `yongpengfu0011@gmail.com`
- App Password: `mgcf latj hlse fmdg`

## Testing Locally

### 1. Create .env file

```bash
cd /Users/yongpengfu/Desktop/Desktop/Desktop/Language/Data_Engineering/Genai/agents/2_openai/deep_search_mine
```

Create a file named `.env` with:

```
OPENAI_API_KEY=your-openai-key-here
RESEND_API_KEY=re_TQ4qchKh_KuURV69cpX3UT8vnx5uNY2hJ
GMAIL_EMAIL=yongpengfu0011@gmail.com
GMAIL_APP_PASSWORD=mgcf latj hlse fmdg
```

### 2. Test Email

```bash
python test_email.py
```

You should see:

```
âœ… Email sent successfully!
Email ID: ...
Check your inbox at yongpengfu0011@gmail.com
```

### 3. Run the Full App

```bash
python deep_research.py
```

## Deploying to Hugging Face Spaces

### Method 1: Gradio CLI (Recommended)

```bash
cd /Users/yongpengfu/Desktop/Desktop/Desktop/Language/Data_Engineering/Genai/agents/2_openai/deep_search_mine

uv run gradio deploy
```

When prompted:

1. **Spaces app title:** `deep_research`
2. **Gradio app file:** `deep_research.py`
3. **Hardware:** `cpu-basic` (with hyphen!)
4. **Spaces secrets:** `y` (yes)
   - **Secret 1:**
     - Name: `OPENAI_API_KEY`
     - Value: [your OpenAI key]
   - **Secret 2:**
     - Name: `RESEND_API_KEY`
     - Value: `re_TQ4qchKh_KuURV69cpX3UT8vnx5uNY2hJ`
   - (leave blank to end)
5. **Create requirements.txt:** `n` (no - already exists)
6. **Create Github Action:** `n` (no)

### Method 2: Manual Push

If deployment is already created, just push:

```bash
git add .
git commit -m "Add Resend email integration"
git push
```

The app will automatically redeploy on Hugging Face.

## Verifying Email Works

1. Deploy to Hugging Face Spaces
2. Wait for deployment to complete (~2-3 minutes)
3. Open your Space URL
4. Enter a research query (e.g., "Latest trends in AI 2025")
5. Click "Run"
6. Watch the progress
7. Check your email at `yongpengfu0011@gmail.com`

You should receive:

- Subject: [Generated by AI based on research]
- Content: Beautiful HTML formatted research report

## Troubleshooting

### Email not received?

1. **Check spam folder** - Resend emails might go to spam initially
2. **Check Resend dashboard** - https://resend.com/emails to see delivery status
3. **Check HF Spaces logs** - Look for "âœ… Email sent successfully via Resend!"

### Deployment failed?

1. **Check requirements.txt** - Should include `resend==2.6.0`
2. **Check secrets** - RESEND_API_KEY must be set in HF Spaces settings
3. **Check logs** - Look for import errors or API key issues

### Email works locally but not on HF Spaces?

- Make sure you added `RESEND_API_KEY` to HF Spaces secrets (not just .env)
- Check the HF Spaces logs for error messages

## Email Limits

**Resend Free Tier:**

- 100 emails per day
- 3,000 emails per month
- Perfect for demos and testing

If you need more:

- Upgrade to Resend Pro ($20/month for 50,000 emails)
- Or use a different recipient email for testing

## Security Notes

ðŸ”’ **Important:**

- Never commit `.env` file to git (it's in `.gitignore`)
- Rotate your API keys if they're exposed
- The API keys in this guide should be kept secure

## Next Steps

1. âœ… Test email locally with `python test_email.py`
2. âœ… Run full app locally with `python deep_research.py`
3. âœ… Deploy to Hugging Face Spaces
4. âœ… Test email on production
5. ðŸŽ‰ Share your app with the world!

## Support

Having issues? Check:

- Resend docs: https://resend.com/docs
- Gradio docs: https://gradio.app/docs
- OpenAI Agents docs: https://platform.openai.com/docs/agents

Happy deploying! ðŸš€
